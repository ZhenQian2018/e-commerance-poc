{"ast":null,"code":"import axios from 'axios';\nimport AuthenticationService from '../service/AuthenticationService';\nimport { LOGIN_SUCESS, LOGIN_FAILED } from '../redux/actions/loginActions';\n\nvar api = function api(_ref) {\n  var dispatch = _ref.dispatch;\n  return function (next) {\n    return function (action) {\n      if (action.type !== 'apiCallBegan') {\n        return next(action);\n      }\n\n      var _action$payload = action.payload,\n          url = _action$payload.url,\n          method = _action$payload.method,\n          data = _action$payload.data,\n          onSucess = _action$payload.onSucess,\n          onError = _action$payload.onError;\n\n      try {\n        AuthenticationService.executeJwtAuthenticationService(url, method, data).then(function (response) {\n          if (response.message === \"login\") {\n            dispatch({\n              type: LOGIN_SUCESS,\n              payload: {\n                loginName: \"login\",\n                isLogin: 1\n              }\n            });\n          } else {\n            dispatch({\n              type: LOGIN_FAILED,\n              payload: {\n                loginName: \"not login\",\n                isLogin: 0\n              }\n            });\n          } //dispatch({ type: onSucess, payload: Response.data })\n\n        });\n      } catch (error) {\n        dispatch({\n          type: onError,\n          payload: error\n        });\n      }\n    };\n  };\n};\n\nexport default api;","map":{"version":3,"sources":["/Users/zhen/Documents/marlabs/E-Commerce-sample/flone/src/middleware/Api.js"],"names":["axios","AuthenticationService","LOGIN_SUCESS","LOGIN_FAILED","api","dispatch","next","action","type","payload","url","method","data","onSucess","onError","executeJwtAuthenticationService","then","response","message","loginName","isLogin","error"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,qBAAP,MAAkC,kCAAlC;AACA,SAAQC,YAAR,EAAqBC,YAArB,QAAwC,+BAAxC;;AAGA,IAAMC,GAAG,GAAG,SAANA,GAAM;AAAA,MAAGC,QAAH,QAAGA,QAAH;AAAA,SAAkB,UAAAC,IAAI;AAAA,WAAI,UAAAC,MAAM,EAAI;AAC5C,UAAIA,MAAM,CAACC,IAAP,KAAgB,cAApB,EAAoC;AAChC,eAAOF,IAAI,CAACC,MAAD,CAAX;AACH;;AAH2C,4BAKKA,MAAM,CAACE,OALZ;AAAA,UAKpCC,GALoC,mBAKpCA,GALoC;AAAA,UAK/BC,MAL+B,mBAK/BA,MAL+B;AAAA,UAKvBC,IALuB,mBAKvBA,IALuB;AAAA,UAKjBC,QALiB,mBAKjBA,QALiB;AAAA,UAKPC,OALO,mBAKPA,OALO;;AAM5C,UAAI;AACAb,QAAAA,qBAAqB,CAACc,+BAAtB,CAAsDL,GAAtD,EAA0DC,MAA1D,EAAiEC,IAAjE,EACCI,IADD,CACM,UAACC,QAAD,EACH;AACD,cAAIA,QAAQ,CAACC,OAAT,KAAmB,OAAvB,EAA+B;AAC7Bb,YAAAA,QAAQ,CAAC;AACPG,cAAAA,IAAI,EAAEN,YADC;AAEPO,cAAAA,OAAO,EAAE;AAAEU,gBAAAA,SAAS,EAAC,OAAZ;AAAoBC,gBAAAA,OAAO,EAAC;AAA5B;AAFF,aAAD,CAAR;AAID,WALD,MAMI;AAEFf,YAAAA,QAAQ,CAAC;AACPG,cAAAA,IAAI,EAAEL,YADC;AAEPM,cAAAA,OAAO,EAAE;AAAEU,gBAAAA,SAAS,EAAC,WAAZ;AAAwBC,gBAAAA,OAAO,EAAC;AAAhC;AAFF,aAAD,CAAR;AAID,WAbA,CAcH;;AACH,SAjBG;AAkBH,OAnBD,CAoBA,OAAOC,KAAP,EAAc;AACVhB,QAAAA,QAAQ,CAAC;AAAEG,UAAAA,IAAI,EAAEM,OAAR;AAAiBL,UAAAA,OAAO,EAAEY;AAA1B,SAAD,CAAR;AAEH;AAEJ,KA/BiC;AAAA,GAAtB;AAAA,CAAZ;;AAoCA,eAAejB,GAAf","sourcesContent":["import axios from 'axios';\nimport AuthenticationService from '../service/AuthenticationService'\nimport {LOGIN_SUCESS,LOGIN_FAILED} from '../redux/actions/loginActions'\n\n\nconst api = ({ dispatch }) => next => action => {\n    if (action.type !== 'apiCallBegan') {\n        return next(action);\n    }\n\n    const { url, method, data, onSucess, onError } = action.payload;\n    try {\n        AuthenticationService.executeJwtAuthenticationService(url,method,data)\n        .then((response\n        )=>{\n          if (response.message===\"login\"){\n            dispatch({\n              type: LOGIN_SUCESS,\n              payload: { loginName:\"login\",isLogin:1}\n            });\n          }\n          else{\n    \n            dispatch({\n              type: LOGIN_FAILED,\n              payload: { loginName:\"not login\",isLogin:0}\n            });\n          }\n        //dispatch({ type: onSucess, payload: Response.data })\n    })\n    }\n    catch (error) {\n        dispatch({ type: onError, payload: error })\n\n    }\n\n}\n\n\n\n    ;\nexport default api;"]},"metadata":{},"sourceType":"module"}